version: '3'

tasks:
  test:
    cmds:
      - go test ./... -tags=unit
    sources:
      - ./**/*.go

  test:integration:
    cmds:
      - docker-compose run --rm go go test ./... {{ .CLI_ARGS }}

  build:
    cmds:
      - go build .
    sources:
      - ./**/*.go

  render-example:
    cmds:
      - rm -rf ./_example
      - cd gen; go run github.com/GabrielCarpr/cqrs/gen init -name=example -root=../_example
